============================================================================
******************  The Union of the Warriors of Shadow  *******************
**********  A detailed information document by Cirion, May 1996  ***********
============================================================================

Modifications:
Cirion, March 2nd, 1997: Adjusted the tax to comply with the new skill
        levels available at adventurer guilds.
Cirion, March 24th, 1997: Removed langage skill from the Union, as the
        previous total skill levels were > 700.
Cirion, April 11th, 1997: Lifted the alignment restriction, the Union
        members can now be any alignment they choose.
Cirion, June 21st, 1997: Adjusted the max skill levels to allow for a
        sup-guru quest in knife, defence, and sway.
Lilith, July 3rd, 2001: Adjusted tax for balance changes on specials,
        skills, etc
Lucius, May 31st, 2005: Recalculated tax numbers based on current docs.
Lilith, Jan 2006: removed Sway Con bonus. It was deemed not worth
        the 1% tax paid and removed upon request of the Elders.
Lilith, Jan 2006: upped darksight bonus so that it begins in the
        first phase and increases to 4 levels instead of 3, also
        per req of Elders. Tax was increased from .50% to 1.0%
Lilith, Jan 2006: lowered blightfighting 20 levels and increased
        2H, sword, and language per request of elders.
Lucius, Apr 2018: Updated tax based on re-coded specials. An increase
        from 30 -> 31 total tax.
Arman,  Dec 2020: Updated in to one file the tax and combat aid elements
        of the Union, including the new sway options.
Carnak, Apr 2021: Updated the sway options to match proper balance
Lilith, June 2021: Added defensive sway and updated docs
============================================================================

--------
OVERVIEW
--------
  The Union of the Warriors of Shadow is an original guild, not based on
any novels or other gaming themes. They are a school of warriors that
were originally founded to be the elite guard for the royalty of Sybarus
City in Avenir, and have since branched out to form their own Union,
almost a cult even, based on pride, dignity, grace, and power.

----------
FILE NAMES
----------
   The following file names are of particular importance:
~Avenir/union/list              Master object for the Union

~Avenir/union/room/pendentive   The join/leave room
~Avenir/union/room/guild        The start room & where the guild flame is
~Avenir/union/room/train        Training room for the Union
~Avenir/union/room/white             ""
~Avenir/union/room/forge             ""
~Avenir/union/room/alcove            ""
~Avenir/union/room/library           ""
~Avenir/union/room/elite        Guru training room (hidden)
~Avenir/union/room/council      Room were Council commands are performed

~Avenir/union/obj/stone         The guild token
~Avenir/union/shadow            The guild shadow
~Avenir/union/occ_soul          The guild soul

~Avenir/union/special/          The specials fling, slash, sway are here

  The Union soul includes the following files in ~Avenir/union/lib/:
ability.h       The functions for the abilities 'contrast' and 'sway'
emotions.h      All the emotions of the Union
filters.h       Various filters and miscellaneous functions
help.h          The help files
language.h      The code for the Union tongue

-----------------
JOINING THE UNION
-----------------
  To join the Union, the player must first find the guildhall, which
is hidden deep in the Utterdark tunnels of Avenir. The guildhall
was origionally in Sybarus City, but repeated attempts by Infidel
revolutionaries to destroy it forced it to move 'underground',
thus making it somewhat difficult to find. Once granted leave, the
player may join in ~Avenir/union/room/pendentive, where he can 'reach
within the stone', to obtain one of the entry quests.
The player must obtain the approval of the Elders by mailing an
application to the 'voice' at the Union post office. A quest is given
to those who are approved for entry. When the quest is solved,
and if the player not a goblin or dwarf (races which are seen as too
clumsy to be a proper member), the player can then join the Union.
A member of the Union will have the guild shadow ~Avenir/union/shadow.c,
the command soul ~Avenir/union/occ_soul.c, and the guild token,
~Avenir/union/obj/stone.c

-----------------
LEAVING THE UNION
-----------------
  A player may at any time leave the Union by doing 'betray the union'
in the pendentive. Death is the penalty for leaving of your own
accord. The player will have been previousley aware of this, because
it is written on the pillar in the pendentive. The player also loses
all the guild skills associated with the Union, and has a bit set that
prevents him from ever joining the Union again. The stat SS_OCCUP is
also cleared.

-------------------
SKILLS IN THE UNION
-------------------
  The maximum possible skills to train are defined in the file
~Avenir/union/lib/skills.h, and it is that file that should be altered
should the skill levels need to be changed for any reason. Most of the
skills cannot be trained up to maximum immediately, but are limited by
various stats, mostly SS_OCCUP, but also some require SS_WIS and SS_DEX
as well. The following skills are available to train in the Union guild
hall in various places:

Skill-name                 Max level              Trained at
-------------------------------------------------------------------
SS_WEP_SWORD                  84                      ""
SS_WEP_KNIFE                  90          ~Avenir/union/room/train.c
SS_2H_COMBAT                  90                      ""
SS_DEFENCE                    90          ~Avenir/union/room/white.c
SS_PARRY                      84                      ""
SS_FLING                     100                      ""
SS_SLASH                     100                      ""
SS_SWAY                       90                      ""

SS_APPR_OBJ                   64          ~Avenir/union/room/forge.c

SS_LANGUAGE                   81          ~Avenir/union/room/novlib0.c

SS_AWARENESS                  80          ~Avenir/union/room/alcove.c
SS_LOC_SENSE                  50                      ""
SS_BLINDFIGHTING              40                      ""

SS_WEP_KNIFE                *100          ~Avenir/union/room/elite.c
SS_SWAY                     *100                      ""

* Can only be trained when the player has solved a certain quest


Guild specific skills:
SS_SWAY     #139050   (see above)
SS_SLASH    #139051   (see above)
SS_FLING    #139052   (see above)

OCC_LEVEL   #139053   Defines ranking in the guild: trainee, member, council

DIGNITY     #139055   Virtue tracker for the member
PRIDE       #139056   Virtue tracker for the membe
GRACE       #139057   Virtue tracker for the membe
PURITY      #139058   Virtue tracker for the membe

-----------------
SPECIAL ABILITIES
-----------------

~Avenir/union/special/      The base directory for "special" abilities

..... special.h  -  General defines related to specials.
....... fling.c  -  The 'fling' combat ability
....... slash.c  -  The 'slash' combat ability
........ sway.c  -  The 'sway' special ability invocation
.... sway_obj.c  -  Object cloned to players which houses actual effect

  The following special abilities are available for members of the Union:

Usay <what>: This is the special language for the Union. It can be
   understood automaticaly by other members of the guild, or bits of it
   can be understood by non-members if your language ability is high enough.

Sway: The 'sway' is a sort of trance that a member of the Union can make
   himself fall into, provided he is rested enough, and has enough mana. 
   It is _not_ a spell, but rather a sort of higher mental state.

   In its default (balanced) form the skill SS_AWARENESS is raised, 
   and the props LIVE_I_QUICKNESS and LIVE_I_SEE_DARK are added to the 
   player in increments. True masters of the sway are granted a brief 
   LIVE_I_SEE_INVIS of one level if they are lucky enough to reach 
   Phase 5.

   Members may also sway 'aggressively' or 'unerringly'. In both cases
   these sway options provide SS_AWARENESS and LIVE_I_QUICKNESS.
   Instead of LIVE_I_SEE_DARK and LIVE_I_SEE_INVIS these other options
   provide the following benefits:
     - 'aggressively' : 10% to 20% boost for fling and slash.
     - 'unerringly'   : an increase in cb_tohit for fling and slash from
                        80 to 108.
     - 'defensively'  : up to 44 caid evasion, with no quickness bonus.

   Combat aid for sway is calculated as:
     - 'balanced'     : avg 28 LIVE_I_QUICKNESS bonus (14 caid)
                        LIVE_I_SEE_* benefits (20 caid)
     - 'aggressively' : avg 38 LIVE_I_QUICKNESS bonus (19 caid)
                        Fling / slash caid increase (14 / 11 caid)
     - 'unerringly'   : avg 38 LIVE_I_QUICKNESS bonus (19 caid)
                        cb_tohit bonus from 80-108 (14 / 11 caid)
     - 'defensively'  : avg 33 evasion ability (33 caid)

   These benefits slowly scale up to the max through 5 phases split
   across 100 seconds. Maximum combat aid is reached at phase 3, which
   is 25 seconds in. Max sway combat aid at sway phase 5 is 44. Over
   the full 100 seconds it provides approximately 33 caid.

   Overall sway combat aid : 33

   Limitations: The sway cannot be entered if the fire in the start room
   has gone out, if the player is too tired, doesn't have enough mana,
   or if the player is drunk. LIVE_I_CONCENTRATE is used when the Sway 
   is initiated, which interrupts special attacks on occasion.   
   
   * The skill for the sway is no. 139050

   (See ~Avenir/union/doc/sway for information)

---------------
SPECIAL ATTACKS
---------------
   The following special attacks are available for members of the Union:

Slash <enemy>: This is a general special attack which requires that
   the warrior is wielding both a sword and a knife at the same time.
   The attack is one that uses both weapons together, such as
   feinting with the sword while stabbing in low with the knife, etc.
   
   The skills used are skills are SS_WEP_SWORD, SS_WEP_KNIFE and SS_SLASH.
   The stats used are SS_DEX, SS_STR and SS_DIS
   * The skill for slash is no. 139051.

   Combat aid : 65

Fling [knife] <enemy>: This is a missile attack, where the warrior
   throws a knife or dagger at the enemy, doing damage. It is
   limited by the result of the knife being moved into the inventory
   of the enemy if the hit is successful or into the environment on
   a miss. Enemies may also pickup these errant weapons if not
   retrieved in time. Misses will cause dulling of the knife and
   will become more and more dull as it continues to be used. 
   
   The skills used are SS_FLING, SS_WEP_KNIFE and SS_FLING while 
   the stats are SS_DEX, SS_STR and SS_DIS.
   * The skill for fling is no. 139052.

   Combat aid : 81

   It is not possible to use slash and fling at the same time.
Furthermore, both specials also have checks against encumberance and
intoxication which may further reduce their effectiveness.

   Shadow Union get a 2x caid bonus to fling and slash when defending 
certain locations in Avenir:
        /d/Avenir/union/room/*
        /d/Avenir/common/city/*
        /d/Avenir/common/bazaar/*
        /d/Avenir/common/outpost/*
        /d/Avenir/common/port/*

   This doesn't count towards their total caid cap, and doesn't stack
with sway aggressively.

---------------------
SPECIAL DISADVANTAGES
---------------------

ABSTINENT:  -10% caid
   While it is possible for a member of the Union to consume
alcohol, his specials fling, slash, and sway will be adversly
affected by it, proportional to how drunk they are.
   They may not enter the Sway if they are more than 25% max 
intox. Since alcohol itself is such a massive combat aid for the 
rest of the game, Guild members have a 10 caid cost reduction 
because of it. 

LIGHT WARRIORS: -5% caid
Specials are additionally impaired when the player is encumbered.
This encumberance penalty equates to approximately 5 combat aid.

------------------------
THE COUNCIL OF THE UNION
------------------------
  The council of the Union consists of three Elders who are able
to declare people as allies or enemies of the Union (with the
result that the players will be treated differently by the NPC's
in the Halls, and enemies will not be allowed to pass through the
gate), as well as accept people for membership into the Union.
Council commands can be performed at ~Avenir/union/room/council.


---------------
UNION GUILD TAX
---------------

Skill-name              Max level  Taxable  Modifer  Taxed
-------------------------------------------------------------------
SS_WEP_KNIFE           100 - 30  =  70     x 1.0   =   70
SS_WEP_SWORD            84 - 30  =  54     x 1.5   =   81
SS_PARRY                84 - 00  =  84     x 1.5   =  126
SS_BLINDFIGHTING        40 - 20  =  20     x 2.0   =   40
SS_DEFENCE              90 - 20  =  70     x 1.5   =  105
SS_2H_COMBAT            90 - 00  =  90     x 2.0   =  180
-------------------------------------------------------------------
Combat aid:   Totals:  488 - 100 = 388    ~ 10.05% |  602
===================================================================
SS_APPR_OBJ             64 - 30  =  34     x 0.5   =   17
SS_AWARENESS            80 - 30  =  50     x 1.0   =   50
SS_LANGUAGE             81 - 30  =  51     x 1.0   =   51
SS_LOC_SENSE            50 - 30  =  20     x 0.5   =   10
-------------------------------------------------------------------
Non-Combat    Totals:  275 - 120 = 155    ~  2.10% |  128
===================================================================
        Grand Totals:  763 - 220 = 543    ~ 12.15% |  730 / 60 = 12.17%
-------------------------------------------------------------------
 Max OCC Skill Slots:              543 - 550 (max)  =  7 remaining
-------------------------------------------------------------------

COMBAT AID TAX:

Slash & Fling: As only one can be used at a time, the highest aid value
is taxed (fling) :    81 combat aid.
Sway :                33 combat aid. 
Abstinent :          -10 combat aid.
Light warrior :      -5 combat aid.

TOTAL combat aid :    99 combat aid.

Combat aid tax :      16.5% (Combat aid of 99 / 6)

Sway phase 5 see invisible :  0.15%
   If you have a sway skill of 100, you still have only a
75% chance of making it to phase five and being able to see
into 1 level of invisibility. Phase five lasts 25 seconds, 1/4th
of the total sway time, making it possible to see invisibility
for 18.75% of playing time.

Sway awareness boost : 0.25%
   The awareness benefit gained is relatively low (an average of
10 levels over a 100 second period). Awareness boosting objects 
and herbs are somewhat common in the game, so this boost in 
awareness isn't necessary, but is in character for the gifts of 
Jazur. If it was taxed as part of the normal skill base, this 
maximum of 14 additional skill levels would be taxed at 0.23%

Shops, pubs, etcetera:  0%
   While there are npcs in the guildhall that sell items only to
members of the Union and those who have been declared as friends
of the Union, they give no special discounts to members, and
the items are in no way special (light armours, knives, knapsacks,
torchs, etc.) There are no pubs in the guildhall. The Union has no
tell line.


-------------------------------------------------------------------
TAXATION SUMMARY
-------------------------------------------------------------------
Skill levels:   12.15%
Combat aid:     16.50%
Sway see invis:  0.15%
Sway Awareness:  0.25%
               --------
                29.05%
               --------
Rounded up ===> 31.00% <===

