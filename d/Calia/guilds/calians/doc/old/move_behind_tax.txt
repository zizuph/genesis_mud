Combat aid for move behind and mbsw
===================================

File: /d/Calia/guilds/calians/specials/move_behind.c
      /d/Calia/guilds/calians/specials/opportunity_attack.c
      /d/Calia/guilds/calians/specials/opportunity_attack_sh.c

Move behind is a skill that allows a player, when in a team 
and being attacked by an opponent or opponents, to move behind 
a team-mate who then faces the opponent(s) attacks. 

Likelihood of success depends on the a number of factors:
    - Move behind skill
    - Dex, Wis, and Int
    - Friend Modifier (Str and Dis of friend)
    - Enemy Modifier (Number of enemies, enemy dex, and wis)

Success is determined using resolve_task.

  resolve_task(TASK_EASY, 
               ({ SS_MOVE_BEHIND,
                  SKILL_WEIGHT, mb_skill,
                  SKILL_AVG, TS_DEX, TS_WIS, TS_INT, SKILL_END,
                  SKILL_VALUE, friend_modifier }),
                  attacker,
                  ({ TS_DEX, TS_WIS, SKILL_VALUE, enemy_modifier }))

There is a short reset time of one second. As a measure to stop enemy 
players from preventing Calians from swarming at all by typing "kill" 
repeatedly, the friend achieves a free opportunity attack once per round
whenever a Calian who is behind is attacked. This is mostly a replacement
for lost swarms, and because it is actually less combat aid than a
swarm, should not incur any further tax. After successfully 
moving behind one finds greater difficulty in moving behind. This 
is to prevent an "invulnerability" problem with repeated moving behind. 
Because move behind simply replaces a tanker, it really incurs no combat
aid whatsoever. Someone is always taking the hits. Without this feature, 
a Calian who swarms would find it very awkward to work well in a team. 
It does have a number of drawbacks as listed above, and its 
own skill. The skill is essential in player fights, important against 
smarter npcs, and is useful in other cases as an alternative to leaving 
and returning especially in dangerous areas. 

There is a special move that Calians can do called "mbsw", 
which is simply a move behind followed by an immediate swarm 
attempt (with the usual preparation time). Without it, a Calian 
involved in a player fight who doesn't have a fast link might 
never be able to swarm. 

Opportunity Attacks - Dealing with Abuse
----------------------------------------
Opportunity Attacks happen when an opponent begins to attack an Calian that
is not the current tanker. It can only occur if both the Calian who is
behind and the tanker are fighting the same foe. There are, however, a
number of ways to trigger an attack, and it is difficult to distinguish
when an attack is triggered by purposefully attacking someone behind, or
simply something that the mudlib does. This is especially true when it
relates to movement. A person who is hunting automatically attacks everyone
when they enter the room. A person being hunted gets automatically attacked
when they re-enter the hostile room. Typically, npcs have about a 2 second
delay before their alarm is called to attack the enemy. By leaving and 
coming back in many times, one can trigger many alarms to reattack.

The code in the opportunity attack shadow was written in such a way to
prevent this. Every time there is movement on the Calian's part, their
opportunity attack mechanism is reset. Any movement on either the Calian
being hunted, or the hunter hunting the Calian will cause a 3 second
period during which opportunity attacks cannot be triggered. Leaving and
re-entering a room will continuously remove the old alarm and restart
a new one, ensuring that the 3 second period is maintained.

Opportunity attacks can happen once a round at most. As such and because it
is a replacement for swarm, I have placed the combat aid for them at
exactly half of swarm (currently 52.5%)

Tax: Though there is no combat aid, we will charge a 1% tax for
     move behind and opportunity attacks for the ability.
     