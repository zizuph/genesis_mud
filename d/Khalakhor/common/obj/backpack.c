/*
 * backpack.c
 *
 * A standard backpack for shops to sell. Uses both
 * the /d/Genesis/std/pack.c standard fill/empty commands,
 * plus the keep/unkeep routines. All praise to Maniac
 * and Mercade for making coding a backpack so simple ;)
 * 
 * Khail - December 13/97
 */
#pragma strict_types

#include <stdproperties.h>
#include <macros.h>

inherit "/d/Khalakhor/common/obj/stdpack";
inherit "/lib/keep";

/*
 * Function name: create_pack
 * Description  : Turn this object into a backpack.
 * Arguments    : n/a
 * Returns      : n/a
 */
public void
create_pack()
{
    set_name("backpack");
    set_pname("backpack");
    set_adj("heavy");
    add_adj("leather");
    set_short("heavy leather backpack");
    set_pshort("heavy leather backpacks");
    set_long("This heavy leather backpack was made by a skilled " +
        "tanner. A brand on the side of the pack indicates that " +
        "it was made by a member of the tanner's guild in " +
        "the city of Harrodoch. Heavy straps allow it to be " +
        "worn and removed, and a wide top allows for easy " +
        "filling and emptying.\n");
    add_item(({"brand"}),
        "A small brand, burned into the leather on the side " +
        "of the pack, represents the tanner's guild. This " +
        "particular one has a large 'H' in the foreground, " +
        "indicating the tanner who assembled the pack was " +
        "probably from the city of Harrodoch.\n");

    set_wearable(1);
    set_mass_storage(1);
    set_keep(1);

    add_prop(CONT_I_WEIGHT, 4500);       /* Weighs 4.5 kg empty */
    add_prop(CONT_I_MAX_WEIGHT, 100000); /* Weighs 100 kg max. */   
    add_prop(CONT_I_VOLUME, 8000);       /* Volume = 8 litres empty. */
    add_prop(CONT_I_MAX_VOLUME, 100000); /* Volume = 100 litres max. */
    add_prop(OBJ_I_VALUE, 400);          /* Valued at 400 coppers. */
    add_prop("_port_macdunn_pack",1);
}

/*
 * Function name: query_recover
 * Description  : Called to generate a recovery string of arguments
 *                to be reset in this object after armageddon.
 * Arguments    : n/a
 * Returns      : Recovery strings generated by the standard 
 *                backpack and keep packages.
 */
public string
query_recover()
{
    return MASTER + ":" + query_container_recover() +
        query_keep_recover();
}

/*
 * Function name: init_recover
 * Description  : Called when loaded after armageddon to initialize
 *                the variables that were saved by query_recover.
 * Arguments    : arg - String of arguments returned by query_recover.
 * Returns      : n/a
 */
public void
init_recover(string arg)
{
    init_container_recover(arg);
    init_keep_recover(arg);
}
