ENABLING QUEST HINTS USING THE ORB SYSTEM IN SPARKLE:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Overview:

   The quest orbs located in the Tower of Realms in Sparkle are now
   considered a standard aspect of quest creation in Genesis. This document
   is meant to be a guide both for quality standards as well as for the
   process of implementing the quest hints by a domain Liege or Archwizard.

The Mortal Experience:

   The effect of this system for a player is that they can travel to the
   Tower of Realms, visit a specific domain's room, and use the orb in that
   room with the following commands:

       <quests>   - Get a list showing how many quests are available in
                    the domain. Unsolved quests will be displayed with
                    a blank line, indicating that a quest exists, but
                    not what the quest is named. Solved quests will
                    be listed by name. (Wizards see even unsolved quests
                    which will be listed in parenthesis.)

       <hint #>   - Get a hint for a specific quest (example <hint 4> to
                    get a hint for the fourth quest in the list. This
                    will show the player a hint that gives them some idea
                    of how to go about looking for the starting point for
                    the quest. It does not give them hints as to how to
                    *solve* the quest.

Quest Names:

   Quest names should be as short as possible and give an at-a-glance
   sense of what the quest involves. All words in the name should be
   capitalized, to have a standard aesthetic across domains. Quests that
   have more than one stage can be listed with # designations. Here is
   an example list from the Kalad domain. Note the wizard perspective
   of unsolved quests being listed in parenthesis, as mentioned above.
   These would be blank lines from a mortal perspective.

   Of the 33 eligible quests in Kalad, you have completed the following:

     1: Trader Quest                       18: (Claddath Quest)         
     2: (Tablet Quest)                     19: (Coffee Quest)         
     3: (Kid Quest)                        20: (Beggars Club Quest)         
     4: (Knife Quest)                      21: Taskmaster Quest #1        
     5: (Beer Quest)                       22: Taskmaster Quest #2      
     6: (Ledger Quest)                     23: Taskmaster Quest #3   
     7: (Prisoner Quest)                   24: Taskmaster Quest #4   
     8: (Locket Quest)                     25: Taskmaster Quest #5      
     9: Bounty Quest                       26: (Park Quest)            
    10: (Goblin Quest)                     27: (Museum Quest)           
    11: Scale Quest                        28: (Minotaur Gem Quest)      
    12: Holy Quest                         29: (Assassins Quest #1)   
    13: (Tower Quest)                      30: (Assassins Quest #2)    
    14: (Oracle Quest)                     31: (Assassins Quest #3) 
    15: (Water Quest)                      32: (Spy Quest)           
    16: (Mara Quest)                       33: (Red Fang Goblin Quest)  
    17: (Kilsek Quest)  

Quest Hints:

   Well-crafted quest hints will do the following things:

       - Thematically present the "experience" of gazing into the
         orb itself.
       - Thematically present the hint itself as some kind of vision
         or dream.
       - Thematically present the "experience" of returning from the
         vision or dream back to reality.

   Here is a good example of this for quest #19 from Kalad, which when
   solved is above listed for players as "Coffee Quest." Note: The hint
   that the wizard wrote begins with the words, "You reach out ..." The
   line above that is automatically generated by the orb itself.

   > hint 19
   Peering into the orb, you sense the following about quest #19:

   You reach out and place your hands on the black orb, while entering a state
   of deep concentration. You feel your mind escaping from your body, flowing
   into the black orb. Like stepping out of a portal, you find yourself in the
   office of the manager of the arena in Kabal. You see a battle-hardened
   dwarf working here, clearly struggling to stay awake. Your vision becomes
   blurry, and you return to your body with a jerk, instinctively removing
   your hands from the orb.

Implementation:

   To begin, create a .txt file of a hint for a specific quest, with a
   filename that will roughly match the official name the quest will
   display in the list. Then, save this file in the appropriate
   domain directory at the following location:

       /d/Sparkle/area/city/data/questdb/hints/[domain]/

   For example, the above "Coffee Quest" from Kalad has the following
   file listing:

       /d/Sparkle/area/city/data/questdb/hints/kalad/coffee.txt

   Next, edit the file for the appropriate domain in the directory:

       /d/Sparkle/area/city/data/questdb/[domain.txt]

   For example, the correct file for the Kalad domain would be:

       /d/Sparkle/area/city/data/questdb/kalad.txt

   Looking at the Kalad file as an example, we see this:

   (note: the entry for the "Coffee Quest" is marked with **)

   Kalad,Beggar Quest,0,0,beggar.txt,default
   Kalad,Trader Quest,0,1,trader.txt,default
   Kalad,Tablet Quest,0,2,tablet.txt,default
   Kalad,Kid Quest,0,3,kid.txt,default
   Kalad,Knife Quest,0,4,knife.txt,default
   Kalad,Beer Quest,0,5,beer.txt,default
   Kalad,Ledger Quest,0,6,ledger.txt,default
   Kalad,Prisoner Quest,0,7,prisoner.txt,default
   Kalad,Locket Quest,0,9,locket.txt,default
   Kalad,Bounty Quest,0,10,bounty.txt,default
   Kalad,Goblin Quest,0,11,goblin.txt,default
   Kalad,Scale Quest,0,12,scale.txt,default
   Kalad,Holy Quest,0,13,holy.txt,default
   Kalad,Tower Quest,0,14,tower.txt,default
   Kalad,Oracle Quest,0,15,oracle.txt,default
   Kalad,Water Quest,0,16,water.txt,default
   Kalad,Mara Quest,0,17,mara.txt,default
   Kalad,Kilsek Quest,0,18,kilsek.txt,default
   Kalad,Claddath Quest,0,19,claddath.txt,default
 **Kalad,Coffee Quest,1,0,coffee.txt,default
   Kalad,Beggars Club Quest,1,1,beggars_club.txt,default
   Kalad,Taskmaster Quest #1,1,2,taskmanager.txt,default
   Kalad,Taskmaster Quest #2,1,3,taskmanager.txt,default
   Kalad,Taskmaster Quest #3,1,4,taskmanager.txt,default
   Kalad,Taskmaster Quest #4,1,5,taskmanager.txt,default
   Kalad,Taskmaster Quest #5,1,6,taskmanager.txt,default
   Kalad,Park Quest,1,7,park.txt,default
   Kalad,Museum Quest,1,8,museum.txt,default
   Kalad,Minotaur Gem Quest,1,9,minotaur.txt,default
   Kalad,Assassins Quest #1,1,10,assassin1.txt,default
   Kalad,Assassins Quest #2,1,11,assassin2.txt,default
   Kalad,Assassins Quest #3,1,12,assassin3.txt,default
   Kalad,Spy Quest,1,13,spy.txt,default
   Kalad,Red Fang Goblin Quest,1,14,red_fang.txt,default
   Kalad,Priest's Dagger (moved to Raumdor),3,0,,always_false,3,0
   Kalad,Drakmere Holy Scriptures (moved to Raumdor),3,1,,always_false,3,1
   Kalad,Khiraa Entrance (moved to Raumdor),3,2,,always_false,3,2
   Kalad,Maze Quest (moved to Raumdor),3,3,,always_false,3,3

   In this list, each line represents a separate quest which will be parsed
   by the quest orb routines to become an array, with each comma separating
   the individual elements. The array elements in order are as follows:

      [0] - Domain name (e.g. Kalad - always capitalized)
      [1] - Quest Name (e.g. Coffee Quest - as discussed above)
      [2] - Group Number assigned to the quest by the domain
      [3] - Bit number assigned to the quest by the domain
      [4] - The filename for the quest hint (e.g. coffee.txt)
      [5] - Validation (see below)

   So, for the "Coffee Quest", we see the entry in the file would be:

      Kalad,Coffee Quest,1,0,coffee.txt,default

   The final "Validation" index is more complex, allowing calls of the
   following (and other) functions to see whether or not a quest should be
   displayed for players when using the orbs:

     default           - Always display

     in_guild          - Only display if the player is in a specific guild. The
                         arg for the guild should be the exact return from the
                         guild shadow when calling: query_guild_name_occ().
                         Typically, this would be true for things like a guru
                         quest for a specific guild. Example:

                Calia,SCoP Guru Quest,2,11,,in_guild,Spirit Circle of Psuchae

                         (note, the above entry leaves a null value for the
                          4th index, because there isn't a hint available
                          for the guru quest in the orbs.)

     false_unless_done - Only display if the player has completed this
                         quest. This is typically used in the case of a
                         quest that has been closed and is no longer
                         available to players, but which should be displayed
                         to those who did solve it when it was open. Example:

                Terel,Mystics Entrance,0,16,no_info.txt,false_unless_done

     always_false      - Never to be displayed. Typically this would be
                         a situation where quest bits are used in a
                         non-reward situation. Example:

                Calia,Cadets Rejoin,3,1,,always_false,3,1

   For detailed understanding of these and more functions available in the
   validation index, please see the source code at:

       /d/Sparkle/area/city/lib/quest_orb_validation.c

   Once you have finished editing the file, the final step to turn the
   hint on in the game is to update the following file:

       /d/Sparkle/area/city/rooms/quest_control_room.c

   After updating that room, go to the domain's orb in the Tower of Realms and
   test it using the <quests> and <hint> function to ensure all is correct.

   Thanks for making new quests for the game!

